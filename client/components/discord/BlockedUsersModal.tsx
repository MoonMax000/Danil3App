import { X } from 'lucide-react';
import { useState } from 'react';

interface BlockedUsersModalProps {
  isOpen: boolean;
  onClose: () => void;
}

const BlockedUsersModal = ({ isOpen, onClose }: BlockedUsersModalProps) => {
  const [selectedUser, setSelectedUser] = useState<string | null>(null);

  const blockedUsers = [
    {
      id: 'jane-doe',
      name: 'Jane Doe',
      avatar: 'https://api.builder.io/api/v1/image/assets/TEMP/b936382093de7604e600f265679980665692294f?width=64',
    },
    {
      id: 'john-smith',
      name: 'John Smith',
      avatar: 'https://api.builder.io/api/v1/image/assets/TEMP/03a90d8f7d9736935ab1eb037890313f941befe2?width=64',
    },
  ];

  if (!isOpen) return null;

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm">
      <div className="flex flex-col w-[440px] h-[932px] pt-12 px-4 pb-0 gap-6 rounded-r-3xl border border-[#181B22] custom-bg-blur">
        {/* Close Button */}
        <button
          onClick={onClose}
          className="flex items-center justify-center w-11 h-11 text-white hover:bg-white/10 rounded-lg transition-colors"
        >
          <X className="w-5 h-5" />
        </button>

        {/* Title */}
        <h2 className="text-[19px] font-bold text-white">Blocked Users</h2>

        {/* Description */}
        <div className="flex flex-col gap-6">
          <p className="text-[15px] font-normal text-[#B0B0B0] leading-normal">
            Blocked users lose access to your messages, group invites, and visibility of your photos, stories, and status.
          </p>
        </div>

        {/* Divider */}
        <div className="h-px bg-[#181B22]" />

        {/* Blocked Users List */}
        <div className="flex flex-col gap-4">
          {blockedUsers.map((user) => (
            <div key={user.id} className="relative">
              <button
                onClick={() => setSelectedUser(selectedUser === user.id ? null : user.id)}
                className={`flex items-center gap-2 w-full px-2 py-2.5 rounded-lg transition-colors ${
                  selectedUser === user.id ? 'bg-[#2E2744]' : 'hover:bg-white/5'
                }`}
              >
                <img
                  src={user.avatar}
                  alt={user.name}
                  className="w-8 h-8 rounded-full"
                />
                <span className="text-[15px] font-bold text-white">{user.name}</span>
                
                {selectedUser === user.id && (
                  <svg 
                    className="w-[21px] h-6 ml-auto" 
                    width="22" 
                    height="24" 
                    viewBox="0 0 22 24" 
                    fill="none" 
                    xmlns="http://www.w3.org/2000/svg"
                  >
                    <g clipPath="url(#clip0_347_2927)">
                      <path d="M16.7965 23.8886C16.74 23.9164 16.6812 23.9393 16.6208 23.9569C16.557 23.9751 16.4916 23.9869 16.4254 23.9921C16.3605 23.9981 16.2951 23.9981 16.2301 23.9921C16.1644 23.9872 16.0991 23.9774 16.0348 23.9628C15.9678 23.9452 15.9024 23.9217 15.8395 23.8925C15.7764 23.8638 15.7162 23.8292 15.6598 23.789C15.6055 23.7483 15.5545 23.7032 15.5075 23.6542C15.4593 23.6022 15.4168 23.5452 15.3805 23.4843L13.6071 20.578L12.1051 22.3358C12.0376 22.4163 11.9659 22.4933 11.8903 22.5663C11.8141 22.6386 11.7379 22.705 11.6598 22.7616L11.6442 22.7733C11.5693 22.8313 11.4911 22.8848 11.4098 22.9335C11.3322 22.9803 11.2512 23.0214 11.1676 23.0566C11.1045 23.0856 11.0392 23.1098 10.9723 23.1288C10.9085 23.1485 10.8432 23.1629 10.777 23.1718C10.7084 23.1812 10.6392 23.1858 10.57 23.1855C10.5044 23.1829 10.4392 23.1757 10.3747 23.164C10.2957 23.149 10.2185 23.1261 10.1442 23.0956C10.0713 23.0663 10.0018 23.029 9.93716 22.9843C9.87247 22.9394 9.81229 22.8884 9.75748 22.8319C9.70316 22.7711 9.65415 22.7058 9.61099 22.6366L9.58951 22.5976L9.57193 22.5565L9.31998 21.8749V21.8417L7.9899 8.44913C7.97709 8.36301 7.97709 8.27548 7.9899 8.18936C8.00514 8.10414 8.03347 8.02179 8.07388 7.94522C8.13828 7.82364 8.23149 7.7197 8.34537 7.64249C8.39972 7.60488 8.45883 7.57467 8.52115 7.55264C8.58411 7.52917 8.6497 7.51343 8.71646 7.50577C8.80046 7.49636 8.8854 7.49965 8.96841 7.51553C9.05346 7.53243 9.13567 7.56136 9.21255 7.60147L9.27115 7.63272C11.9098 9.35928 14.3688 10.9648 16.818 12.5644L20.529 14.9843C20.5965 15.0277 20.6617 15.0746 20.7243 15.1249C20.7806 15.169 20.8341 15.2167 20.8844 15.2675L20.8961 15.2812C20.9462 15.3311 20.9926 15.3846 21.0348 15.4413C21.0768 15.4946 21.1141 15.5514 21.1461 15.6112C21.1865 15.682 21.2199 15.7566 21.2458 15.8339C21.2708 15.908 21.2878 15.9846 21.2965 16.0624C21.3053 16.1409 21.3053 16.2202 21.2965 16.2987C21.2887 16.3774 21.2737 16.4552 21.2516 16.5312C21.2106 16.6627 21.1486 16.7866 21.068 16.8983C21.029 16.9559 20.9852 17.0101 20.9372 17.0605C20.8876 17.1139 20.834 17.1635 20.777 17.2089C20.7053 17.268 20.6296 17.3222 20.5504 17.371C20.4659 17.4216 20.3786 17.4673 20.2887 17.5077C20.1969 17.5487 20.0934 17.5878 20.0036 17.621C19.9043 17.6547 19.8032 17.6827 19.7008 17.705C19.1598 17.8105 18.6208 17.9413 18.0856 18.0702L17.4508 18.2206L19.2086 21.1386C19.2447 21.2007 19.2748 21.2661 19.2985 21.3339C19.3694 21.5355 19.3796 21.7535 19.3278 21.9608V21.9804C19.3119 22.0434 19.2903 22.1048 19.2633 22.164C19.2348 22.2245 19.2015 22.2826 19.1637 22.3378C19.1245 22.3946 19.0801 22.4476 19.0309 22.496C18.9815 22.5443 18.9279 22.588 18.8708 22.6269L18.4801 22.8788C17.9398 23.2491 17.3776 23.5863 16.7965 23.8886ZM7.34927 3.80069C7.44267 3.97924 7.46348 4.18697 7.40733 4.38049C7.35119 4.57401 7.22245 4.73836 7.04799 4.8392C6.87354 4.94004 6.66687 4.96957 6.47115 4.92164C6.27543 4.8737 6.10581 4.75199 5.99771 4.58194L4.43521 1.84756C4.34664 1.66968 4.32919 1.46473 4.3864 1.27442C4.44361 1.08412 4.57119 0.922774 4.74317 0.82322C4.91515 0.723666 5.11861 0.693389 5.31212 0.73855C5.50564 0.783712 5.67467 0.900918 5.78482 1.06631L7.35904 3.80069H7.34927ZM4.41958 12.9355C4.59747 12.8469 4.80242 12.8294 4.99272 12.8866C5.18303 12.9439 5.34437 13.0714 5.44393 13.2434C5.54348 13.4154 5.57376 13.6189 5.5286 13.8124C5.48344 14.0059 5.36623 14.1749 5.20083 14.2851L2.46646 15.8593C2.28857 15.9479 2.08362 15.9653 1.89332 15.9081C1.70302 15.8509 1.54167 15.7233 1.44212 15.5513C1.34256 15.3793 1.31229 15.1759 1.35745 14.9824C1.40261 14.7889 1.51981 14.6198 1.68521 14.5097L4.41958 12.9355ZM4.01529 7.78116C4.20743 7.84158 4.36882 7.97389 4.46575 8.15046C4.56269 8.32702 4.58768 8.5342 4.53551 8.72876C4.48335 8.92331 4.35805 9.0902 4.18579 9.19458C4.01352 9.29896 3.80759 9.33278 3.61099 9.28897L0.5856 8.46866C0.399893 8.40447 0.245193 8.27266 0.15233 8.0995C0.0594672 7.92634 0.0352622 7.72455 0.0845389 7.53434C0.133816 7.34414 0.252955 7.17948 0.418213 7.07319C0.583471 6.96691 0.782712 6.92679 0.976225 6.96084L4.00943 7.78116H4.01529ZM16.0153 8.04092C15.8374 8.12949 15.6325 8.14695 15.4421 8.08973C15.2518 8.03252 15.0905 7.90494 14.9909 7.73296C14.8914 7.56098 14.8611 7.35753 14.9063 7.16401C14.9514 6.9705 15.0686 6.80146 15.234 6.69131L17.9684 5.11709C18.1463 5.02853 18.3513 5.01107 18.5416 5.06829C18.7319 5.1255 18.8932 5.25308 18.9928 5.42506C19.0923 5.59704 19.1226 5.80049 19.0774 5.99401C19.0323 6.18752 18.9151 6.35656 18.7497 6.4667L16.0153 8.04092ZM12.3942 4.01749C12.3738 4.12273 12.332 4.22265 12.2714 4.31104C12.2107 4.39942 12.1325 4.47439 12.0417 4.53126C11.9508 4.58813 11.8492 4.6257 11.7432 4.64162C11.6372 4.65754 11.5291 4.65148 11.4255 4.62381C11.322 4.59614 11.2252 4.54746 11.1413 4.48079C11.0573 4.41411 10.988 4.33088 10.9376 4.23627C10.8872 4.14166 10.8569 4.03769 10.8484 3.93083C10.8399 3.82397 10.8535 3.71652 10.8883 3.61514L11.693 0.585844C11.7572 0.400138 11.889 0.245437 12.0622 0.152574C12.2353 0.0597114 12.4371 0.0355063 12.6273 0.084783C12.8175 0.13406 12.9822 0.253199 13.0885 0.418457C13.1948 0.583716 13.2349 0.782956 13.2008 0.97647L12.3942 4.01749ZM16.3336 22.8378L18.2223 21.6933C17.5622 20.5956 16.4938 19.0468 15.9743 17.9491C15.9644 17.9264 15.9566 17.9029 15.9508 17.8788C15.9234 17.7576 15.9453 17.6305 16.0115 17.5254C16.0778 17.4202 16.1832 17.3458 16.3044 17.3183C17.3551 17.078 18.4293 16.8515 19.4723 16.5898C19.5927 16.5629 19.7104 16.525 19.8239 16.4765C19.9144 16.437 19.9997 16.3865 20.0778 16.3261C20.1045 16.3033 20.1293 16.2785 20.152 16.2519C20.1635 16.2377 20.1727 16.2219 20.1793 16.205L20.1676 16.1698C20.1447 16.1309 20.1157 16.096 20.0817 16.0663C20.0315 16.0205 19.9772 15.9793 19.9196 15.9433L9.19107 8.93546C9.60318 13.1073 10.2067 17.5487 10.4508 21.6913C10.4573 21.7573 10.469 21.8226 10.486 21.8866C10.4981 21.9288 10.5152 21.9695 10.5368 22.0077L10.5622 22.0351C10.5809 22.0378 10.6 22.0378 10.6188 22.0351C10.653 22.0273 10.6864 22.0161 10.7184 22.0019C10.8082 21.9617 10.8922 21.9098 10.9684 21.8476C11.0635 21.7686 11.1517 21.6817 11.2321 21.5878C11.609 21.1444 13.1071 19.2167 13.4586 19.0136C13.565 18.9504 13.6919 18.9317 13.8119 18.9617C13.9319 18.9917 14.0352 19.0679 14.0993 19.1737L16.3336 22.8358V22.8378Z" fill="white"/>
                    </g>
                    <defs>
                      <clipPath id="clip0_347_2927">
                        <rect width="21.3301" height="24" fill="white"/>
                      </clipPath>
                    </defs>
                  </svg>
                )}
              </button>

              {/* Unblock Popup */}
              {selectedUser === user.id && (
                <div className="absolute left-0 top-full mt-2 flex items-center gap-2.5 px-4 py-4 rounded-lg border border-[#181B22] bg-[rgba(11,14,17,0.5)] shadow-[24px_48px_48px_0_rgba(0,0,0,0.64)] backdrop-blur-[50px] z-10">
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M10.0195 17.52C10.4795 18.11 11.1995 18.5 11.9995 18.5C13.3795 18.5 14.4995 17.38 14.4995 16C14.4995 15.43 14.3095 14.9 13.9895 14.48" stroke="white" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
                    <path d="M2.82 20.8C2.21 20.04 2 18.83 2 17V15C2 11 3 10 7 10H17C17.36 10 17.69 10.01 18 10.03C21.17 10.21 22 11.36 22 15V17C22 21 21 22 17 22H7C6.64 22 6.31 21.99 6 21.97" stroke="white" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
                    <path d="M6 10V8C6 4.69 7 2 12 2C16.15 2 17.54 3.38 17.9 5.56" stroke="white" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
                    <path d="M22 2L2 22" stroke="white" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
                  </svg>
                  <span className="text-[15px] font-bold text-white">Unblock</span>
                </div>
              )}
            </div>
          ))}
        </div>
      </div>
    </div>
  );
};

export default BlockedUsersModal;
